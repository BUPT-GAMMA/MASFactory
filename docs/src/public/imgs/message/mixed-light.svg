<svg xmlns="http://www.w3.org/2000/svg" width="1040" height="420" viewBox="0 0 1040 420">
  <defs>
    <style>
      .title { font: 700 24px 'Segoe UI', Arial, sans-serif; fill: #0f172a; }
      .box { fill: #ffffff; stroke: #5b8def; stroke-width: 2; rx: 12; ry: 12; }
      .store { fill: #eef2ff; stroke: #7c83ff; stroke-width: 2; rx: 12; ry: 12; }
      .txt { font: 600 18px 'Segoe UI', Arial, sans-serif; fill: #0f172a; text-anchor: middle; dominant-baseline: middle; }
      .hint { font: 600 15px 'Segoe UI', Arial, sans-serif; fill: #5a6b85; text-anchor: middle; }
      .arrow { stroke: #7b8da8; stroke-width: 2.5; marker-end: url(#m); fill: none; }
      .dash { stroke-dasharray: 6 5; }
      .arrow-head { fill: #7b8da8; }
    </style>
    <marker id="m" markerWidth="7" markerHeight="7" refX="6" refY="3.5" orient="auto">
      <path d="M0,0 L7,3.5 L0,7 z" class="arrow-head"/>
    </marker>
  </defs>

  <text x="40" y="42" class="title">混合传递：业务字段走水平，状态字段走垂直</text>

  <rect x="360" y="90" width="320" height="72" class="store"/>
  <text x="520" y="126" class="txt">attributes: seen / retry</text>

  <rect x="70" y="260" width="180" height="72" class="box"/>
  <text x="160" y="296" class="txt">ENTRY</text>

  <rect x="310" y="260" width="180" height="72" class="box"/>
  <text x="400" y="296" class="txt">classify</text>

  <rect x="550" y="260" width="180" height="72" class="box"/>
  <text x="640" y="296" class="txt">finalize</text>

  <rect x="790" y="260" width="180" height="72" class="box"/>
  <text x="880" y="296" class="txt">EXIT</text>

  <path d="M250 296 L310 296" class="arrow"/>
  <path d="M490 296 L550 296" class="arrow"/>
  <path d="M730 296 L790 296" class="arrow"/>

  <text x="280" y="278" class="hint">item, score</text>
  <text x="520" y="278" class="hint">item, level</text>
  <text x="760" y="278" class="hint">result</text>

  <path d="M500 162 C470 200,440 230,400 260" class="arrow dash"/>
  <path d="M400 332 C430 392,480 396,520 90" class="arrow dash"/>
  <text x="332" y="224" class="hint">pull seen</text>
  <text x="456" y="408" class="hint">push seen</text>
</svg>
